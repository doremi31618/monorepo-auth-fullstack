(function(g,I){typeof exports=="object"&&typeof module<"u"?I(exports):typeof define=="function"&&define.amd?define(["exports"],I):(g=typeof globalThis<"u"?globalThis:g||self,I(g.ShareContract={}))})(this,(function(g){"use strict";var I=(function(){function e(t){this.groups=[],this.each=!1,this.context=void 0,this.type=t.type,this.name=t.name,this.target=t.target,this.propertyName=t.propertyName,this.constraints=t?.constraints,this.constraintCls=t.constraintCls,this.validationTypeOptions=t.validationTypeOptions,t.validationOptions&&(this.message=t.validationOptions.message,this.groups=t.validationOptions.groups,this.always=t.validationOptions.always,this.each=t.validationOptions.each,this.context=t.validationOptions.context)}return e})(),_e=(function(){function e(){}return e.prototype.transform=function(t){var r=[];return Object.keys(t.properties).forEach(function(n){t.properties[n].forEach(function(i){var s={message:i.message,groups:i.groups,always:i.always,each:i.each},o={type:i.type,name:i.name,target:t.name,propertyName:n,constraints:i.constraints,validationTypeOptions:i.options,validationOptions:s};r.push(new I(o))})}),r},e})();function xe(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}var be=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},K=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},Me=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},ee=(function(){function e(){this.validationMetadatas=new Map,this.constraintMetadatas=new Map}return Object.defineProperty(e.prototype,"hasValidationMetaData",{get:function(){return!!this.validationMetadatas.size},enumerable:!1,configurable:!0}),e.prototype.addValidationSchema=function(t){var r=this,n=new _e().transform(t);n.forEach(function(i){return r.addValidationMetadata(i)})},e.prototype.addValidationMetadata=function(t){var r=this.validationMetadatas.get(t.target);r?r.push(t):this.validationMetadatas.set(t.target,[t])},e.prototype.addConstraintMetadata=function(t){var r=this.constraintMetadatas.get(t.target);r?r.push(t):this.constraintMetadatas.set(t.target,[t])},e.prototype.groupByPropertyName=function(t){var r={};return t.forEach(function(n){r[n.propertyName]||(r[n.propertyName]=[]),r[n.propertyName].push(n)}),r},e.prototype.getTargetValidationMetadatas=function(t,r,n,i,s){var o,l,u=function(a){return typeof a.always<"u"?a.always:a.groups&&a.groups.length?!1:n},y=function(a){return!!(i&&(!s||!s.length)&&a.groups&&a.groups.length)},m=this.validationMetadatas.get(t)||[],d=m.filter(function(a){return a.target!==t&&a.target!==r?!1:u(a)?!0:y(a)?!1:s&&s.length>0?a.groups&&!!a.groups.find(function(x){return s.indexOf(x)!==-1}):!0}),h=[];try{for(var b=be(this.validationMetadatas.entries()),w=b.next();!w.done;w=b.next()){var z=K(w.value,2),X=z[0],Y=z[1];t.prototype instanceof X&&h.push.apply(h,Me([],K(Y),!1))}}catch(a){o={error:a}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}var Z=h.filter(function(a){return typeof a.target=="string"||a.target===t||a.target instanceof Function&&!(t.prototype instanceof a.target)?!1:u(a)?!0:y(a)?!1:s&&s.length>0?a.groups&&!!a.groups.find(function(x){return s.indexOf(x)!==-1}):!0}),v=Z.filter(function(a){return!d.find(function(x){return x.propertyName===a.propertyName&&x.type===a.type})});return d.concat(v)},e.prototype.getTargetValidatorConstraints=function(t){return this.constraintMetadatas.get(t)||[]},e})();function te(){var e=xe();return e.classValidatorMetadataStorage||(e.classValidatorMetadataStorage=new ee),e.classValidatorMetadataStorage}var re=(function(){function e(){}return e.isValid=function(t){var r=this;return t!=="isValid"&&t!=="getMessage"&&Object.keys(this).map(function(n){return r[n]}).indexOf(t)!==-1},e.CUSTOM_VALIDATION="customValidation",e.NESTED_VALIDATION="nestedValidation",e.PROMISE_VALIDATION="promiseValidation",e.CONDITIONAL_VALIDATION="conditionalValidation",e.WHITELIST="whitelistValidation",e.IS_DEFINED="isDefined",e})(),we=new((function(){function e(){this.instances=[]}return e.prototype.get=function(t){var r=this.instances.find(function(n){return n.type===t});return r||(r={type:t,object:new t},this.instances.push(r)),r.object},e})());function ne(e){return we.get(e)}var Se=(function(){function e(t,r,n){n===void 0&&(n=!1),this.target=t,this.name=r,this.async=n}return Object.defineProperty(e.prototype,"instance",{get:function(){return ne(this.target)},enumerable:!1,configurable:!0}),e})();function De(e){var t;if(e.validator instanceof Function){t=e.validator;var r=ne(ee).getTargetValidatorConstraints(e.validator);if(r.length>1)throw"More than one implementation of ValidatorConstraintInterface found for validator on: ".concat(e.target.name,":").concat(e.propertyName)}else{var n=e.validator;t=(function(){function s(){}return s.prototype.validate=function(o,l){return n.validate(o,l)},s.prototype.defaultMessage=function(o){return n.defaultMessage?n.defaultMessage(o):""},s})(),te().addConstraintMetadata(new Se(t,e.name,e.async))}var i={type:e.name&&re.isValid(e.name)?e.name:re.CUSTOM_VALIDATION,name:e.name,target:e.target,propertyName:e.propertyName,validationOptions:e.options,constraintCls:t,constraints:e.constraints};te().addValidationMetadata(new I(i))}function F(e,t){return function(r){var n="";return e(n,r)}}function O(e,t){return function(r,n){De({name:e.name,target:r.constructor,propertyName:n,options:t,constraints:e.constraints,validator:e.validator})}}function Ie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N={exports:{}},ae;function R(){return ae||(ae=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(n){if(n==null)throw new TypeError("Expected a string but received a ".concat(n));if(n.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(n.constructor.name))}e.exports=t.default,e.exports.default=t.default})(N,N.exports)),N.exports}var T={exports:{}},ie;function oe(){return ie||(ie=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var s in i)typeof n[s]>"u"&&(n[s]=i[s]);return n}e.exports=t.default,e.exports.default=t.default})(T,T.exports)),T.exports}var Fe="isNotEmpty";function Oe(e){return e!==""&&e!==null&&e!==void 0}function f(e){return O({name:Fe,validator:{validate:function(t,r){return Oe(t)},defaultMessage:F(function(t){return t+"$property should not be empty"})}},e)}var A={exports:{}},ue;function Ee(){return ue||(ue=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(R());function n(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},i(o)}function s(o,l){(0,r.default)(o);var u,y;i(l)==="object"?(u=l.min||0,y=l.max):(u=arguments[1],y=arguments[2]);var m=encodeURI(o).split(/%..|./).length-1;return m>=u&&(typeof y>"u"||m<=y)}e.exports=t.default,e.exports.default=t.default})(A,A.exports)),A.exports}var P={exports:{}},q={exports:{}},se;function Ne(){return se||(se=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function r(i){return Object.prototype.toString.call(i)==="[object RegExp]"}function n(i,s){for(var o=0;o<s.length;o++){var l=s[o];if(i===l||r(l)&&l.test(i))return!0}return!1}e.exports=t.default,e.exports.default=t.default})(q,q.exports)),q.exports}var V={exports:{}},le;function Re(){return le||(le=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(R()),n=i(oe());function i(l){return l&&l.__esModule?l:{default:l}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function o(l,u){(0,r.default)(l),u=(0,n.default)(u,s),u.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),u.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var y=l.split("."),m=y[y.length-1];return u.require_tld&&(y.length<2||!u.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(m)||/\s/.test(m))||!u.allow_numeric_tld&&/^\d+$/.test(m)?!1:y.every(function(d){return!(d.length>63&&!u.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(d)||/[\uff01-\uff5e]/.test(d)||/^-|-$/.test(d)||!u.allow_underscores&&/_/.test(d))})}e.exports=t.default,e.exports.default=t.default})(V,V.exports)),V.exports}var C={exports:{}},fe;function Te(){return fe||(fe=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;var r=n(R());function n(d){return d&&d.__esModule?d:{default:d}}function i(d){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},i(d)}var s="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",o="(".concat(s,"[.]){3}").concat(s),l=new RegExp("^".concat(o,"$")),u="(?:[0-9a-fA-F]{1,4})",y=new RegExp("^("+"(?:".concat(u,":){7}(?:").concat(u,"|:)|")+"(?:".concat(u,":){6}(?:").concat(o,"|:").concat(u,"|:)|")+"(?:".concat(u,":){5}(?::").concat(o,"|(:").concat(u,"){1,2}|:)|")+"(?:".concat(u,":){4}(?:(:").concat(u,"){0,1}:").concat(o,"|(:").concat(u,"){1,3}|:)|")+"(?:".concat(u,":){3}(?:(:").concat(u,"){0,2}:").concat(o,"|(:").concat(u,"){1,4}|:)|")+"(?:".concat(u,":){2}(?:(:").concat(u,"){0,3}:").concat(o,"|(:").concat(u,"){1,5}|:)|")+"(?:".concat(u,":){1}(?:(:").concat(u,"){0,4}:").concat(o,"|(:").concat(u,"){1,6}|:)|")+"(?::((?::".concat(u,"){0,5}:").concat(o,"|(?::").concat(u,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function m(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,r.default)(d);var b=(i(h)==="object"?h.version:arguments[1])||"";return b?b.toString()==="4"?l.test(d):b.toString()==="6"?y.test(d):!1:m(d,{version:4})||m(d,{version:6})}e.exports=t.default,e.exports.default=t.default})(C,C.exports)),C.exports}var ce;function Ae(){return ce||(ce=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=Z;var r=u(R()),n=u(Ne()),i=u(Ee()),s=u(Re()),o=u(Te()),l=u(oe());function u(v){return v&&v.__esModule?v:{default:v}}var y={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},m=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,h=/^[a-z\d]+$/,b=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,w=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,z=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,X=254;function Y(v){var a=v.replace(/^"(.+)"$/,"$1");if(!a.trim())return!1;var x=/[\.";<>]/.test(a);if(x){if(a===v)return!1;var S=a.split('"').length===a.split('\\"').length;if(!S)return!1}return!0}function Z(v,a){if((0,r.default)(v),a=(0,l.default)(a,y),a.require_display_name||a.allow_display_name){var x=v.match(m);if(x){var S=x[1];if(v=v.replace(S,"").replace(/(^<|>$)/g,""),S.endsWith(" ")&&(S=S.slice(0,-1)),!Y(S))return!1}else if(a.require_display_name)return!1}if(!a.ignore_max_length&&v.length>X)return!1;var ge=v.split("@"),D=ge.pop(),H=D.toLowerCase();if(a.host_blacklist.length>0&&(0,n.default)(H,a.host_blacklist)||a.host_whitelist.length>0&&!(0,n.default)(H,a.host_whitelist))return!1;var _=ge.join("@");if(a.domain_specific_validation&&(H==="gmail.com"||H==="googlemail.com")){_=_.toLowerCase();var ye=_.split("+")[0];if(!(0,i.default)(ye.replace(/\./g,""),{min:6,max:30}))return!1;for(var ve=ye.split("."),$=0;$<ve.length;$++)if(!h.test(ve[$]))return!1}if(a.ignore_max_length===!1&&(!(0,i.default)(_,{max:64})||!(0,i.default)(D,{max:254})))return!1;if(!(0,s.default)(D,{require_tld:a.require_tld,ignore_max_length:a.ignore_max_length,allow_underscores:a.allow_underscores})){if(!a.allow_ip_domain)return!1;if(!(0,o.default)(D)){if(!D.startsWith("[")||!D.endsWith("]"))return!1;var he=D.slice(1,-1);if(he.length===0||!(0,o.default)(he))return!1}}if(a.blacklisted_chars&&_.search(new RegExp("[".concat(a.blacklisted_chars,"]+"),"g"))!==-1)return!1;if(_[0]==='"'&&_[_.length-1]==='"')return _=_.slice(1,_.length-1),a.allow_utf8_local_part?z.test(_):b.test(_);for(var Ge=a.allow_utf8_local_part?w:d,me=_.split("."),J=0;J<me.length;J++)if(!Ge.test(me[J]))return!1;return!0}e.exports=t.default,e.exports.default=t.default})(P,P.exports)),P.exports}var Pe=Ae();const qe=Ie(Pe);var Ve="isEmail";function Ce(e,t){return typeof e=="string"&&qe(e,t)}function je(e,t){return O({name:Ve,constraints:[e],validator:{validate:function(r,n){return Ce(r,n?.constraints[0])},defaultMessage:F(function(r){return r+"$property must be an email"})}},t)}var ke="isDate";function Le(e){return e instanceof Date&&!isNaN(e.getTime())}function j(e){return O({name:ke,validator:{validate:function(t,r){return Le(t)},defaultMessage:F(function(t){return t+"$property must be a Date instance"})}},e)}var Ue="isNumber";function Be(e,t){if(t===void 0&&(t={}),typeof e!="number")return!1;if(e===1/0||e===-1/0)return!!t.allowInfinity;if(Number.isNaN(e))return!!t.allowNaN;if(t.maxDecimalPlaces!==void 0){var r=0;if(e%1!==0&&(r=e.toString().split(".")[1].length),r>t.maxDecimalPlaces)return!1}return Number.isFinite(e)}function k(e,t){return e===void 0&&(e={}),O({name:Ue,constraints:[e],validator:{validate:function(r,n){return Be(r,n?.constraints[0])},defaultMessage:F(function(r){return r+"$property must be a number conforming to the specified constraints"})}},t)}var ze="isString";function He(e){return e instanceof String||typeof e=="string"}function p(e){return O({name:ze,validator:{validate:function(t,r){return He(t)},defaultMessage:F(function(t){return t+"$property must be a string"})}},e)}var Qe=Object.defineProperty,c=(e,t,r,n)=>{for(var i=void 0,s=e.length-1,o;s>=0;s--)(o=e[s])&&(i=o(t,r,i)||i);return i&&Qe(t,r,i),i};class E{constructor(t,r,n,i){this.token=t,this.refreshToken=r,this.userId=n,this.name=i}token;refreshToken;userId;name}c([p(),f()],E.prototype,"token"),c([p(),f()],E.prototype,"refreshToken"),c([k(),f()],E.prototype,"userId"),c([p(),f()],E.prototype,"name");class M{token;userId;name;expiresAt;createdAt;updatedAt}c([p(),f()],M.prototype,"token"),c([k(),f()],M.prototype,"userId"),c([p(),f()],M.prototype,"name"),c([j(),f()],M.prototype,"expiresAt"),c([j(),f()],M.prototype,"createdAt"),c([j(),f()],M.prototype,"updatedAt");class Q{email;password}c([p(),f()],Q.prototype,"email"),c([p(),f()],Q.prototype,"password");class de{userId}c([k(),f()],de.prototype,"userId");class L{email;password;name}c([p(),f()],L.prototype,"email"),c([p(),f()],L.prototype,"password"),c([p(),f()],L.prototype,"name");class pe{email}c([p(),f()],pe.prototype,"email");class W{token;password}c([p(),f()],W.prototype,"token"),c([p(),f()],W.prototype,"password");class U{token;expiresAt;resetLink}c([p(),f()],U.prototype,"token"),c([j(),f()],U.prototype,"expiresAt"),c([p(),f()],U.prototype,"resetLink");class G{userId;redirect}c([k(),f()],G.prototype,"userId"),c([p(),f()],G.prototype,"redirect");class B{email;name;password}c([je(),f()],B.prototype,"email"),c([p(),f()],B.prototype,"name"),c([p(),f()],B.prototype,"password");const We={Users:{Read:"users.read",Create:"users.create",Update:"users.update",Delete:"users.delete",ManageRoles:"users.roles.update"},Roles:{Read:"roles.read",Create:"roles.create",Update:"roles.update",Delete:"roles.delete",ManagePermissions:"roles.permissions.update"},Permissions:{Read:"permissions.read"}};g.CreateUserDto=B,g.LoginDto=Q,g.LoginResponseDto=G,g.PermissionSchema=We,g.ResetConfirmDto=W,g.ResetRequestDto=pe,g.ResetResponseDto=U,g.SessionDto=M,g.SignoutDto=de,g.SignupDto=L,g.UserIdentityDto=E,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})}));
